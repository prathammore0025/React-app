{"ast":null,"code":"import { LOGIN_SUCCESS, LOGIN_REQUEST, LOAD_REQUEST, LOAD_SUCCESS, LOAD_FAIL, LOGOUT_SUCCESS } from \"../constants/userConstants\";\nimport axios from \"../apiConfig/api\";\nexport const registeruser = (userData, navigate, fun) => async () => {\n  try {\n    const config = {\n      headers: {\n        \"Conetnt-Type\": \"application/json\"\n      }\n    };\n    const res = await axios.post(\"/register\", userData, config);\n    if (res.status == 201) {\n      navigate(\"/login\");\n    } else {\n      window.alert(\"somthing went wrong\");\n    }\n    fun(null);\n  } catch (error) {\n    fun(error.response.data.message);\n    console.log(error);\n  }\n};\nexport const loginUser = (userData, fun) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"Conetnt-Type\": \"application/json\"\n      }\n    };\n    const res = await axios.post(\"/login\", userData, config);\n    if (res.status == 200) {\n      localStorage.setItem(\"userToken\", res.data.token);\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: res.data.user\n      });\n    } else {\n      window.alert(\"somthing went wrong\");\n    }\n    fun(null);\n  } catch (error) {\n    fun(error.response.data.message);\n    console.log(error);\n  }\n};\nexport const loadUser = () => async dispatch => {\n  try {\n    const token = localStorage.getItem(\"userToken\");\n    if (token) {\n      const config = {\n        headers: {\n          \"Conetnt-Type\": \"application/json\"\n        }\n      };\n      const res = await axios.post(\"/get_user_data\", {\n        token\n      }, config);\n      dispatch({\n        type: LOAD_SUCCESS,\n        payload: res.data.user\n      });\n    } else {\n      console.log(\"token is not present..!\");\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const logoutUser = navigate => async dispatch => {\n  try {\n    localStorage.removeItem(\"userToken\");\n    dispatch({\n      type: LOGOUT_SUCCESS\n    });\n    navigate(\"/login\");\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"names":["LOGIN_SUCCESS","LOGIN_REQUEST","LOAD_REQUEST","LOAD_SUCCESS","LOAD_FAIL","LOGOUT_SUCCESS","axios","registeruser","userData","navigate","fun","config","headers","res","post","status","window","alert","error","response","data","message","console","log","loginUser","dispatch","localStorage","setItem","token","type","payload","user","loadUser","getItem","logoutUser","removeItem"],"sources":["/root/Techdome-frontend/src/actions/userAction.js"],"sourcesContent":["import { LOGIN_SUCCESS, LOGIN_REQUEST, LOAD_REQUEST, LOAD_SUCCESS, LOAD_FAIL, LOGOUT_SUCCESS } from \"../constants/userConstants\";\nimport axios from \"../apiConfig/api\";\n\nexport const registeruser = (userData, navigate, fun) => async () => {\n    try {\n        const config = { headers: { \"Conetnt-Type\": \"application/json\" } };\n        const res = await axios.post(\"/register\", userData, config);\n        if (res.status == 201) {\n            navigate(\"/login\");\n        } else {\n            window.alert(\"somthing went wrong\");\n        }\n\n        fun(null);\n\n    } catch (error) {\n        fun(error.response.data.message)\n        console.log(error);\n    }\n}\n\nexport const loginUser = (userData, fun) => async (dispatch) => {\n    try {\n        const config = { headers: { \"Conetnt-Type\": \"application/json\" } };\n        const res = await axios.post(\"/login\", userData, config);\n        if (res.status == 200) {\n            localStorage.setItem(\"userToken\", res.data.token);\n            dispatch({ type: LOGIN_SUCCESS, payload: res.data.user });\n        } else {\n            window.alert(\"somthing went wrong\");\n        }\n\n        fun(null);\n\n    } catch (error) {\n        fun(error.response.data.message);\n        console.log(error);\n    }\n}\n\nexport const loadUser = () => async (dispatch) => {\n    try {\n        const token = localStorage.getItem(\"userToken\");\n        if (token) {\n            const config = { headers: { \"Conetnt-Type\": \"application/json\" } };\n            const res = await axios.post(\"/get_user_data\", { token }, config);\n            dispatch({ type: LOAD_SUCCESS, payload: res.data.user });\n        } else {\n            console.log(\"token is not present..!\");\n        }\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport const logoutUser = (navigate) => async (dispatch) => {\n    try {\n        localStorage.removeItem(\"userToken\");\n        dispatch({ type: LOGOUT_SUCCESS });\n        navigate(\"/login\");\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}